System.register(["./chunks/navigation-legacy-DeZ5xxQO.min.js","./chunks/universal-loop-legacy-BB4QGSeb.min.js"],function(t,e){"use strict";return{setters:[null,null],execute:function(){var t;t=jQuery,void 0===window.HPH&&(window.HPH={}),HPH.Forms={config:{ajaxUrl:window.ajaxurl||"/wp-admin/admin-ajax.php",nonce:"",debug:!1,selectors:{forms:"[data-route-type], .hph-form, .hph-general-contact-form, .hph-property-inquiry-form, .hph-agent-contact-form",validateForms:'form[data-validate="true"]',requiredFields:"input[required], select[required], textarea[required]",emailFields:'input[type="email"]',phoneFields:'input[type="tel"]',urlFields:'input[type="url"]',numberFields:'input[type="number"]'},classes:{error:"is-invalid",success:"is-valid",loading:"is-loading",disabled:"is-disabled"}},rules:{required:{test:function(t){return t&&t.trim().length>0},message:"This field is required"},email:{test:function(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)},message:"Please enter a valid email address"},phone:{test:function(t){const e=t.replace(/[\s\-\(\)\.]/g,"");return/^[\+]?[1-9][\d]{0,15}$/.test(e)},message:"Please enter a valid phone number"},url:{test:function(t){try{return new URL(t),!0}catch{return/^https?:\/\/.+/.test(t)}},message:"Please enter a valid URL"},number:{test:function(t){return!isNaN(t)&&""!==t},message:"Please enter a valid number"},minLength:{test:function(t,e){return t.length>=e},message:function(t){return`Please enter at least ${t} characters`}},maxLength:{test:function(t,e){return t.length<=e},message:function(t){return`Please enter no more than ${t} characters`}},price:{test:function(t){return/^\$?[\d,]+(\.\d{2})?$/.test(t.replace(/\s/g,""))},message:"Please enter a valid price (e.g., $250,000 or 250000)"}},init:function(){this.setupNonce(),this.bindEvents(),this.setupFormEnhancements(),this.initializeExistingForms()},setupNonce:function(){this.config.nonce=t('meta[name="hph-nonce"]').attr("content")||t('input[name="hph_nonce"]').val()||t('input[name="_wpnonce"]').val()||"",this.config.ajaxUrl=window.hph_ajax?.url||window.ajaxurl||"/wp-admin/admin-ajax.php"},bindEvents:function(){t(document).off("submit.hph-forms").on("submit.hph-forms",this.config.selectors.forms,this.handleFormSubmission.bind(this)),t(document).off("blur.hph-forms").on("blur.hph-forms",this.config.selectors.requiredFields,this.validateField.bind(this)),t(document).off("input.hph-forms").on("input.hph-forms",this.config.selectors.emailFields,this.debounce(this.validateField.bind(this),300)),t(document).off("input.hph-forms").on("input.hph-forms",this.config.selectors.phoneFields,this.debounce(this.validateField.bind(this),300)),t(document).off("input.hph-forms").on("input.hph-forms",this.config.selectors.urlFields,this.debounce(this.validateField.bind(this),300)),t(document).off("input.hph-forms").on("input.hph-forms",this.config.selectors.numberFields,this.debounce(this.validateField.bind(this),300)),t(document).off("submit.hph-validate").on("submit.hph-validate",this.config.selectors.validateForms,this.validateForm.bind(this)),t(document).off("focus.hph-forms").on("focus.hph-forms","input, select, textarea",this.clearFieldValidation.bind(this)),t(document).off("hph:forms:validate").on("hph:forms:validate",this.validateForm.bind(this)),t(document).off("hph:forms:reset").on("hph:forms:reset",this.resetForm.bind(this))},handleFormSubmission:function(e){e.preventDefault(),e.stopImmediatePropagation();const i=t(e.currentTarget);if(i.data("hph-submitting"))return!1;const n=this.getFormData(i);if(this.config.debug,!this.validateForm.call(this,e))return!1;i.data("hph-submitting",!0);const s=i.data("route-type")||"contact",o=this.getSubmissionMethod(i,s);return this.submitForm(i,n,o),!1},getFormData:function(t){const e=new FormData(t[0]);return e.append("nonce",this.config.nonce),!e.has("route_type")&&t.data("route-type")&&e.append("route_type",t.data("route-type")),e},getSubmissionMethod:function(t,e){return t.find('input[name="action"]').val()||{contact:"hph_route_form","property-inquiry":"hph_route_form","agent-contact":"hph_route_form","valuation-request":"hph_route_form","showing-request":"hph_route_form","general-inquiry":"hph_route_form","listing-form":"hph_route_form","lead-form":"hph_route_form",lead_capture:"hph_route_form"}[e]||"hph_route_form"},submitForm:function(e,i,n){const s=this;i.append("action",n),this.setFormLoading(e,!0),t.ajax({url:this.config.ajaxUrl,type:"POST",data:i,processData:!1,contentType:!1,success:function(t){s.handleFormSuccess(e,t)},error:function(t,i,n){s.handleFormError(e,n)},complete:function(){e.removeData("hph-submitting"),s.setFormLoading(e,!1)}})},handleFormSuccess:function(t,e){t.removeData("hph-submitting"),e.success?(this.showFormMessage(t,e.data.message||"Form submitted successfully!","success"),this.resetForm({target:t[0]}),t.trigger("hph:forms:success",[e]),e.data.redirect&&setTimeout(()=>{window.location.href=e.data.redirect},1500)):this.handleFormError(t,e.data?.message||"Form submission failed")},handleFormError:function(t,e){t.removeData("hph-submitting"),this.showFormMessage(t,e,"error"),t.trigger("hph:forms:error",[e])},showFormMessage:function(e,i,n="info"){e.find(".hph-form-message").remove();const s=t(`\n                <div class="hph-form-message hph-form-message-${n}">\n                    <span class="hph-form-message-text">${i}</span>\n                    <button type="button" class="hph-form-message-close">&times;</button>\n                </div>\n            `);e.prepend(s),"success"===n&&setTimeout(()=>{s.fadeOut(()=>s.remove())},5e3),s.find(".hph-form-message-close").on("click",function(){s.fadeOut(()=>s.remove())})},validateForm:function(e){const i=t(e.target||e.currentTarget);let n=!0;return!i.is(this.config.selectors.validateForms)||(i.find(this.config.selectors.requiredFields).each((t,e)=>{this.validateField({target:e})||(n=!1)}),i.find(this.config.selectors.emailFields).each((e,i)=>{t(i).val()&&!this.validateField({target:i})&&(n=!1)}),i.find(this.config.selectors.phoneFields).each((e,i)=>{t(i).val()&&!this.validateField({target:i})&&(n=!1)}),!n&&e.preventDefault&&e.preventDefault(),n)},validateField:function(e){const i=t(e.target||e.currentTarget),n=i.val(),s=i.attr("type");let o=!0,a="";if(i.prop("required")&&!this.rules.required.test(n)&&(o=!1,a=this.rules.required.message),n&&o)switch(s){case"email":this.rules.email.test(n)||(o=!1,a=this.rules.email.message);break;case"tel":this.rules.phone.test(n)||(o=!1,a=this.rules.phone.message);break;case"url":this.rules.url.test(n)||(o=!1,a=this.rules.url.message);break;case"number":this.rules.number.test(n)||(o=!1,a=this.rules.number.message)}if(n&&o){const t=i.data("min-length"),e=i.data("max-length");t&&!this.rules.minLength.test(n,t)&&(o=!1,a=this.rules.minLength.message(t)),e&&!this.rules.maxLength.test(n,e)&&(o=!1,a=this.rules.maxLength.message(e)),i.hasClass("price-field")&&!this.rules.price.test(n)&&(o=!1,a=this.rules.price.message)}return this.setFieldValidationState(i,o,a),o},setFieldValidationState:function(e,i,n=""){const s=e.closest(".form-group, .hph-form-group");if(e.removeClass(`${this.config.classes.error} ${this.config.classes.success}`),s.find(".invalid-feedback, .hph-field-error").remove(),i)e.addClass(this.config.classes.success);else if(e.addClass(this.config.classes.error),n){const i=t('<div class="invalid-feedback hph-field-error"></div>').text(n);s.length?s.append(i):e.after(i)}},clearFieldValidation:function(e){const i=t(e.target),n=i.closest(".form-group, .hph-form-group");i.removeClass(`${this.config.classes.error} ${this.config.classes.success}`),n.find(".invalid-feedback, .hph-field-error").remove()},setupFormEnhancements:function(){this.setupLoadingStates(),this.setupPlaceholderEnhancements(),this.setupFieldFormatting()},setupLoadingStates:function(){t(this.config.selectors.forms).each(function(){const e=t(this).find('button[type="submit"], input[type="submit"]');e.find(".loading-spinner").length||e.append('<span class="loading-spinner" style="display:none;">‚è≥</span>')})},setupPlaceholderEnhancements:function(){t("input[placeholder], textarea[placeholder]").on("focus",function(){t(this).data("original-placeholder",t(this).attr("placeholder"))}).on("blur",function(){const e=t(this).data("original-placeholder");e&&t(this).attr("placeholder",e)})},setupFieldFormatting:function(){t(this.config.selectors.phoneFields).on("input",function(){let e=t(this).val().replace(/\D/g,"");e.length>0&&(e=e.length<=3?`(${e}`:e.length<=6?`(${e.slice(0,3)}) ${e.slice(3)}`:`(${e.slice(0,3)}) ${e.slice(3,6)}-${e.slice(6,10)}`,t(this).val(e))})},setFormLoading:function(t,e){const i=t.find('button[type="submit"], input[type="submit"]'),n=i.find(".loading-spinner");if(e)t.addClass(this.config.classes.loading),i.prop("disabled",!0).addClass(this.config.classes.disabled),n.show(),i.data("original-text")||i.data("original-text",i.text()),i.text("Submitting...");else{t.removeClass(this.config.classes.loading),i.prop("disabled",!1).removeClass(this.config.classes.disabled),n.hide();const e=i.data("original-text");e&&i.text(e)}},resetForm:function(e){const i=t(e.target||e.currentTarget);i[0].reset(),i.find("input, select, textarea").removeClass(`${this.config.classes.error} ${this.config.classes.success}`),i.find(".invalid-feedback, .hph-field-error").remove(),i.find(".hph-form-message").remove(),i.trigger("hph:forms:reset")},initializeExistingForms:function(){t(this.config.selectors.forms).each((e,i)=>{const n=t(i);n.attr("novalidate")||n.attr("novalidate","novalidate"),n.hasClass("needs-validation")||n.addClass("needs-validation")})},debounce:function(t,e){let i;return function(...n){clearTimeout(i),i=setTimeout(()=>{clearTimeout(i),t(...n)},e)}},validate:function(e){const i=t(e);return this.validateForm({target:i[0]})},submit:function(e){t(e).trigger("submit")},addRule:function(t,e,i){this.rules[t]={test:e,message:i}}},t(document).ready(function(){HPH.Forms.init()}),window.FormValidation=HPH.Forms,window.HappyPlaceFormHandler=HPH.Forms,void 0!==e&&e.exports&&(e.exports=HPH.Forms),function(t){class e{constructor(){this.form=t(".hph-contact-form"),this.submitBtn=this.form.find('button[type="submit"]'),this.originalBtnText=this.submitBtn.text(),this.init()}init(){0!==this.form.length&&(this.bindEvents(),this.setupValidation(),this.setupEnhancements())}bindEvents(){this.form.find("input, textarea, select").on("blur",e=>{this.validateField(t(e.target))}),this.form.find("input, textarea, select").on("focus",e=>{this.clearFieldValidation(t(e.target))})}setupValidation(){this.form.find("input[required], textarea[required], select[required]").each(function(){t(this).addClass("hph-required-field")}),this.form.find('input[type="email"]').attr("data-validation","email"),this.form.find('input[type="tel"]').attr("data-validation","phone")}setupEnhancements(){this.form.find("textarea[maxlength]").each(function(){const e=t(this),i=parseInt(e.attr("maxlength")),n=t(`<div class="hph-character-counter"><span class="current">0</span> / <span class="max">${i}</span></div>`);e.after(n),e.on("input",function(){const t=this.value.length;n.find(".current").text(t),t>.9*i?n.addClass("hph-text-warning"):n.removeClass("hph-text-warning"),t>i?(n.addClass("hph-text-danger"),this.value=this.value.substring(0,i),n.find(".current").text(i)):n.removeClass("hph-text-danger")}),e.trigger("input")}),t('a[href="#contact-form"]').on("click",function(e){e.preventDefault();const i=t("#contact-form");i.length&&t("html, body").animate({scrollTop:i.offset().top-100},800)})}validateField(t){const e=t.val().trim();t.attr("name");const i=t.prop("required"),n=t.attr("type")||t.prop("tagName").toLowerCase();let s=!0,o="";if(i&&""===e)s=!1,o="This field is required";else if("email"===n&&""!==e)/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||(s=!1,o="Please enter a valid email address");else if("tel"===n&&""!==e){const t=/^[\+]?[1-9][\d]{0,15}$/,i=e.replace(/[\s\-\(\)\.]/g,"");t.test(i)||(s=!1,o="Please enter a valid phone number")}else if("url"===n&&""!==e)try{new URL(e)}catch{/^https?:\/\/.+/.test(e)||(s=!1,o="Please enter a valid URL")}const a=t.attr("minlength"),r=t.attr("maxlength");return a&&e.length<parseInt(a)&&(s=!1,o=`Please enter at least ${a} characters`),r&&e.length>parseInt(r)&&(s=!1,o=`Please enter no more than ${r} characters`),this.setFieldValidation(t,s,o),s}validateForm(){let e=!0;return this.form.find("input[required], textarea[required], select[required]").each((i,n)=>{this.validateField(t(n))||(e=!1)}),this.form.find('input[type="email"], input[type="tel"], input[type="url"]').each((i,n)=>{""===t(n).val().trim()||this.validateField(t(n))||(e=!1)}),e}setFieldValidation(e,i,n=""){const s=e.closest(".form-group, .hph-form-group");if(e.removeClass("is-invalid is-valid"),s.find(".invalid-feedback, .hph-field-error").remove(),i)e.addClass("is-valid");else if(e.addClass("is-invalid"),n){const i=t('<div class="invalid-feedback hph-field-error"></div>').text(n);s.length?s.append(i):e.after(i)}}clearFieldValidation(t){const e=t.closest(".form-group, .hph-form-group");t.removeClass("is-invalid is-valid"),e.find(".invalid-feedback, .hph-field-error").remove()}clearValidation(){this.form.find("input, textarea, select").removeClass("is-invalid is-valid"),this.form.find(".invalid-feedback, .hph-field-error").remove()}submitForm(){return!1}setLoadingState(t){}showMessage(t,e){}clearMessages(){}}t(document).ready(function(){new e}),window.HPHContactForm=e}(jQuery),document.addEventListener("DOMContentLoaded",function(){function t(t){t.classList.add("active"),document.body.style.overflow="hidden"}function e(t){t.classList.remove("active"),document.body.style.overflow=""}!function(){const t=document.querySelector(".hph-modal");if(t){if(t.classList.add("active"),"flex"!==getComputedStyle(t).display){const t=document.createElement("style");t.setAttribute("data-modal-fallback","true"),t.textContent="\n                    .hph-modal.active,\n                    .hph-lightbox.active {\n                        display: flex !important;\n                        position: fixed !important;\n                        top: 0 !important;\n                        left: 0 !important;\n                        width: 100% !important;\n                        height: 100% !important;\n                        background: rgba(0, 0, 0, 0.5) !important;\n                        z-index: 10000 !important;\n                        align-items: center !important;\n                        justify-content: center !important;\n                        animation: modalFadeIn 0.3s ease !important;\n                    }\n\n                    .hph-modal-content {\n                        background: white !important;\n                        border-radius: 8px !important;\n                        padding: 2rem !important;\n                        max-width: 90% !important;\n                        max-height: 90% !important;\n                        overflow-y: auto !important;\n                        position: relative !important;\n                    }\n\n                    @keyframes modalFadeIn {\n                        from { opacity: 0; transform: scale(0.95); }\n                        to { opacity: 1; transform: scale(1); }\n                    }\n                ",document.head.appendChild(t)}t.classList.remove("active")}}(),document.querySelectorAll(".modal-trigger, [data-modal-form]").forEach(e=>{e.addEventListener("click",function(i){i.preventDefault(),i.stopPropagation();let n="hph-form-modal";e.dataset.modalId&&(n=e.dataset.modalId);const s=document.getElementById(n);if(!s)return;const o=s.querySelector(".hph-modal-title"),a=s.querySelector(".hph-modal-subtitle-section p");o&&e.dataset.modalTitle&&(o.textContent=e.dataset.modalTitle),a&&e.dataset.modalSubtitle&&(a.textContent=e.dataset.modalSubtitle),t(s)})}),document.addEventListener("click",function(t){if(t.target.matches("[data-modal-close]")||t.target.closest("[data-modal-close]")||t.target.classList.contains("hph-modal-backdrop")){const t=document.querySelector(".hph-modal.active");t&&e(t)}}),document.addEventListener("keydown",function(t){if("Escape"===t.key){const t=document.querySelector(".hph-modal.active");t&&e(t)}}),window.openHphFormModal=function(e="hph-form-modal"){const i=document.getElementById(e);i&&t(i)},window.closeHphFormModal=function(t=null){if(t){const i=document.getElementById(t);i&&e(i)}else{const t=document.querySelector(".hph-modal.active");t&&e(t)}},window.openCustomModal=window.openHphFormModal,window.openFelloModal=()=>window.openHphFormModal("hph-fello-modal"),window.openConsultationModal=()=>window.openHphFormModal("hph-consultation-modal")})}}});
