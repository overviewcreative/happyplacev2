System.register(["./chunks/unified-listings-legacy-DZ9rO86D.min.js"],function(n,a){"use strict";return{setters:[null],execute:function(){var n;n=jQuery,HPH.MortgageCalculator={init:function(){this.initCalculators(),this.initAffordabilityCalculator(),this.initPrequalificationForm()},initCalculators:function(){n(".mortgage-calculator").each(function(){var a=n(this);HPH.MortgageCalculator.setupCalculator(a)})},setupCalculator:function(n){var a=n.find("input, select"),e=n.find(".calculate-payment");n.find("#payment-result"),a.on("input change",HPH.debounce(function(){HPH.MortgageCalculator.calculatePayment(n)},500)),e.on("click",function(a){a.preventDefault(),HPH.MortgageCalculator.calculatePayment(n)}),HPH.MortgageCalculator.calculatePayment(n)},calculatePayment:function(n){var a=parseFloat(n.find("#loan-amount").val())||0,e=parseFloat(n.find("#interest-rate").val())||0,t=parseInt(n.find("#loan-term").val())||30,i=parseFloat(n.find("#down-payment").val())||0,s=parseFloat(n.find("#property-tax").val())||0,p=parseFloat(n.find("#home-insurance").val())||0,l=parseFloat(n.find("#pmi").val())||0,h=parseFloat(n.find("#hoa-fees").val())||0,o=a-i,r=e/100/12,c=12*t,u=0;r>0&&c>0?u=o*(r*Math.pow(1+r,c))/(Math.pow(1+r,c)-1):o>0&&c>0&&(u=o/c);var d=s/12,m=p/12,f=l/12,y=h/12,b=u+d+m+f+y;HPH.MortgageCalculator.displayResults(n,{principalInterest:u,propertyTax:d,insurance:m,pmi:f,hoaFees:y,totalPayment:b,loanAmount:a,downPayment:i,principal:o})},displayResults:function(n,a){var e=n.find("#payment-result");if(a.totalPayment<=0)e.html('<p class="hph-text-gray-600">Please enter valid loan details to calculate payment.</p>').removeClass("hph-hidden");else{var t=`\n                <div class="mortgage-results hph-space-y-4">\n                    <div class="total-payment hph-text-center hph-p-4 hph-bg-primary-50 hph-rounded-lg">\n                        <div class="hph-text-sm hph-text-gray-600 hph-mb-1">Total Monthly Payment</div>\n                        <div class="hph-text-3xl hph-font-bold hph-text-primary-600">\n                            ${HPH.MortgageCalculator.formatCurrency(a.totalPayment)}\n                        </div>\n                    </div>\n                    \n                    <div class="payment-breakdown hph-space-y-2">\n                        <h4 class="hph-font-semibold hph-mb-3">Payment Breakdown</h4>\n                        \n                        <div class="breakdown-item hph-flex hph-justify-between">\n                            <span>Principal & Interest</span>\n                            <span class="hph-font-medium">${HPH.MortgageCalculator.formatCurrency(a.principalInterest)}</span>\n                        </div>\n                        \n                        ${a.propertyTax>0?`\n                        <div class="breakdown-item hph-flex hph-justify-between">\n                            <span>Property Tax</span>\n                            <span class="hph-font-medium">${HPH.MortgageCalculator.formatCurrency(a.propertyTax)}</span>\n                        </div>\n                        `:""}\n                        \n                        ${a.insurance>0?`\n                        <div class="breakdown-item hph-flex hph-justify-between">\n                            <span>Home Insurance</span>\n                            <span class="hph-font-medium">${HPH.MortgageCalculator.formatCurrency(a.insurance)}</span>\n                        </div>\n                        `:""}\n                        \n                        ${a.pmi>0?`\n                        <div class="breakdown-item hph-flex hph-justify-between">\n                            <span>PMI</span>\n                            <span class="hph-font-medium">${HPH.MortgageCalculator.formatCurrency(a.pmi)}</span>\n                        </div>\n                        `:""}\n                        \n                        ${a.hoaFees>0?`\n                        <div class="breakdown-item hph-flex hph-justify-between">\n                            <span>HOA Fees</span>\n                            <span class="hph-font-medium">${HPH.MortgageCalculator.formatCurrency(a.hoaFees)}</span>\n                        </div>\n                        `:""}\n                    </div>\n                    \n                    <div class="loan-summary hph-pt-4 hph-border-t hph-space-y-2">\n                        <h4 class="hph-font-semibold hph-mb-3">Loan Summary</h4>\n                        \n                        <div class="summary-item hph-flex hph-justify-between">\n                            <span>Home Price</span>\n                            <span class="hph-font-medium">${HPH.MortgageCalculator.formatCurrency(a.loanAmount)}</span>\n                        </div>\n                        \n                        <div class="summary-item hph-flex hph-justify-between">\n                            <span>Down Payment</span>\n                            <span class="hph-font-medium">${HPH.MortgageCalculator.formatCurrency(a.downPayment)}</span>\n                        </div>\n                        \n                        <div class="summary-item hph-flex hph-justify-between">\n                            <span>Loan Amount</span>\n                            <span class="hph-font-medium">${HPH.MortgageCalculator.formatCurrency(a.principal)}</span>\n                        </div>\n                    </div>\n                    \n                    <div class="calculator-actions hph-pt-4 hph-space-y-2">\n                        <button type="button" class="get-prequalified hph-btn hph-btn-primary hph-w-full">\n                            Get Pre-qualified\n                        </button>\n                        <button type="button" class="contact-lender hph-btn hph-btn-outline hph-w-full">\n                            Contact a Lender\n                        </button>\n                    </div>\n                </div>\n            `;e.html(t).removeClass("hph-hidden"),e.find(".get-prequalified").on("click",function(){HPH.MortgageCalculator.showPrequalificationForm(a)}),e.find(".contact-lender").on("click",function(){HPH.MortgageCalculator.contactLender(a)})}},initAffordabilityCalculator:function(){n(".affordability-calculator").each(function(){var a=n(this),e=a.find("input, select"),t=a.find(".calculate-affordability");e.on("input change",HPH.debounce(function(){HPH.MortgageCalculator.calculateAffordability(a)},500)),t.on("click",function(n){n.preventDefault(),HPH.MortgageCalculator.calculateAffordability(a)})})},calculateAffordability:function(n){var a=parseFloat(n.find("#annual-income").val())||0,e=parseFloat(n.find("#monthly-debts").val())||0,t=parseFloat(n.find("#down-payment-affordability").val())||0,i=parseFloat(n.find("#interest-rate-affordability").val())||3.5,s=parseInt(n.find("#loan-term-affordability").val())||30,p=a/12*.28-e;if(p<=0)n.find("#affordability-result").html('<p class="hph-text-red-600">Based on your current debt, you may need to reduce monthly obligations before purchasing a home.</p>').removeClass("hph-hidden");else{var l,h=i/100/12,o=12*s,r=(l=h>0?p*(Math.pow(1+h,o)-1)/(h*Math.pow(1+h,o)):p*o)+t,c=`\n                <div class="affordability-results hph-space-y-4">\n                    <div class="max-price hph-text-center hph-p-4 hph-bg-green-50 hph-rounded-lg">\n                        <div class="hph-text-sm hph-text-gray-600 hph-mb-1">Maximum Home Price</div>\n                        <div class="hph-text-3xl hph-font-bold hph-text-green-600">\n                            ${HPH.MortgageCalculator.formatCurrency(r)}\n                        </div>\n                    </div>\n                    \n                    <div class="affordability-breakdown hph-space-y-2">\n                        <div class="breakdown-item hph-flex hph-justify-between">\n                            <span>Maximum Monthly Payment</span>\n                            <span class="hph-font-medium">${HPH.MortgageCalculator.formatCurrency(p)}</span>\n                        </div>\n                        <div class="breakdown-item hph-flex hph-justify-between">\n                            <span>Maximum Loan Amount</span>\n                            <span class="hph-font-medium">${HPH.MortgageCalculator.formatCurrency(l)}</span>\n                        </div>\n                        <div class="breakdown-item hph-flex hph-justify-between">\n                            <span>Down Payment</span>\n                            <span class="hph-font-medium">${HPH.MortgageCalculator.formatCurrency(t)}</span>\n                        </div>\n                    </div>\n                </div>\n            `;n.find("#affordability-result").html(c).removeClass("hph-hidden")}},initPrequalificationForm:function(){n(document).on("click",".get-prequalified",function(n){n.preventDefault(),HPH.showAlert("Prequalification form would open here","info")})},showPrequalificationForm:function(a){var e=`\n                <div id="prequalification-modal" class="hph-modal">\n                    <div class="hph-modal-content">\n                        <div class="hph-modal-header">\n                            <h3>Get Pre-qualified</h3>\n                            <button type="button" class="hph-modal-close">&times;</button>\n                        </div>\n                        <div class="hph-modal-body">\n                            <p>Based on your calculation, you're looking at a monthly payment of approximately <strong>${HPH.MortgageCalculator.formatCurrency(a.totalPayment)}</strong>.</p>\n                            <p>Would you like to get pre-qualified with one of our preferred lenders?</p>\n                            <form class="prequalification-form hph-space-y-4">\n                                <div class="hph-form-group">\n                                    <label class="hph-label">Full Name</label>\n                                    <input type="text" class="hph-input" required>\n                                </div>\n                                <div class="hph-form-group">\n                                    <label class="hph-label">Email</label>\n                                    <input type="email" class="hph-input" required>\n                                </div>\n                                <div class="hph-form-group">\n                                    <label class="hph-label">Phone</label>\n                                    <input type="tel" class="hph-input" required>\n                                </div>\n                                <button type="submit" class="hph-btn hph-btn-primary hph-w-full">\n                                    Submit Pre-qualification Request\n                                </button>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n            `;n("body").append(e),HPH.openModal("prequalification-modal"),n(".prequalification-form").on("submit",function(a){a.preventDefault(),HPH.showAlert("Pre-qualification request submitted!","success"),HPH.closeModal(),setTimeout(function(){n("#prequalification-modal").remove()},500)})},contactLender:function(n){HPH.showAlert("Contact lender functionality would be implemented here","info")},formatCurrency:function(n){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(n)},formatPercentage:function(n){return n.toFixed(3)+"%"}},n(document).ready(function(){HPH.MortgageCalculator.init()}),window.hphDebug}}});
