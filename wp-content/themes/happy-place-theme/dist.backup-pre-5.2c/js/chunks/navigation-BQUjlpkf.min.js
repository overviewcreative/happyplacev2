window.HPH&&HPH.register("headerNavigation",function(){return{init:function(){this.initMobileMenu(),this.initSearchToggle(),this.initStickyHeader()},initMobileMenu:function(){const e=document.querySelector(".hph-header-actions__btn--menu, .hph-site-header-enhanced__mobile-toggle, [data-mobile-toggle]"),t=document.querySelector(".hph-site-header-enhanced__mobile-menu, [data-mobile-menu]"),i=document.querySelector(".hph-header-actions__btn--close, .hph-mobile-close"),c=document.querySelector(".hph-site-header-enhanced__mobile-overlay, [data-mobile-overlay]");!e||!t||(this.mobileToggle=e,this.mobileMenu=t,this.mobileClose=i,this.mobileOverlay=c,HPH.events.on(e,"click",s=>{s.preventDefault(),e.getAttribute("aria-expanded")==="true"?this.closeMobileMenu():this.openMobileMenu()}),i&&HPH.events.on(i,"click",s=>{s.preventDefault(),this.closeMobileMenu()}),c&&HPH.events.on(c,"click",s=>{s.preventDefault(),this.closeMobileMenu()}),HPH.events.on(window,"resize",()=>{window.innerWidth>=769&&this.closeMobileMenu()}))},openMobileMenu:function(){document.body.classList.add("hph-mobile-menu-open"),this.mobileMenu.classList.add("active","is-active"),this.mobileOverlay&&this.mobileOverlay.classList.add("active","is-active"),this.mobileToggle.setAttribute("aria-expanded","true"),this.mobileToggle.classList.add("active","is-active");const e=document.querySelector(".hph-header-actions");e&&e.classList.add("hph-header-actions--menu-active"),this.mobileToggle.classList.contains("hph-header-actions__btn--menu")&&this.mobileToggle.classList.add("hph-header-actions__btn--active"),this.mobileToggle.classList.contains("hph-site-header-enhanced__mobile-toggle")&&this.mobileToggle.classList.add("is-active")},closeMobileMenu:function(){document.body.classList.remove("hph-mobile-menu-open"),this.mobileMenu.classList.remove("active","is-active"),this.mobileOverlay&&this.mobileOverlay.classList.remove("active","is-active"),this.mobileToggle.setAttribute("aria-expanded","false"),this.mobileToggle.classList.remove("active","is-active");const e=document.querySelector(".hph-header-actions");e&&e.classList.remove("hph-header-actions--menu-active"),this.mobileToggle.classList.contains("hph-header-actions__btn--menu")&&this.mobileToggle.classList.remove("hph-header-actions__btn--active")},initSearchToggle:function(){const e=document.querySelector(".hph-header-actions__btn--search, .hph-site-header-enhanced__search-toggle, [data-search-toggle]"),t=document.querySelector(".hph-site-header-enhanced__search-bar, [data-search-bar]"),i=document.querySelector(".hph-header-actions__btn--clear, .hph-search-close"),c=document.querySelector("#header-search-input, .hph-site-header-enhanced__search-input, .hph-search-input");if(!e||!t){console.warn("Search elements not found:",{searchToggle:e,searchBar:t});return}this.searchBar=t,this.searchToggle=e,this.searchInput=c,HPH.events.on(e,"click",s=>{s.preventDefault(),t.classList.contains("is-active")?this.closeSearch():this.openSearch()}),i&&HPH.events.on(i,"click",s=>{s.preventDefault(),this.closeSearch()}),HPH.events.on(document,"keydown",s=>{s.key==="Escape"&&t.classList.contains("is-active")&&this.closeSearch()}),HPH.events.on(document,"click",s=>{!t.contains(s.target)&&!e.contains(s.target)&&this.closeSearch()})},openSearch:function(){console.log("openSearch called - searchBar:",this.searchBar,"searchToggle:",this.searchToggle),this.searchBar.classList.add("is-active"),this.searchToggle.classList.add("is-active");const e=document.querySelector(".hph-header-actions");e&&e.classList.add("hph-header-actions--search-active"),document.body.classList.add("hph-search-active"),this.searchInput&&setTimeout(()=>{this.searchInput.focus()},100)},closeSearch:function(){this.searchBar.classList.remove("is-active"),this.searchToggle.classList.remove("is-active");const e=document.querySelector(".hph-header-actions");e&&e.classList.remove("hph-header-actions--search-active"),document.body.classList.remove("hph-search-active")},initStickyHeader:function(){const e=document.querySelector(".hph-site-header-enhanced, .hph-header"),t=document.querySelector(".hph-site-header-enhanced__topbar, .hph-topbar"),i=document.body;if(!e)return;let c=!1,s=!1,a=window.innerWidth<=768,n=!1;const d=a?16:8,h=()=>{const o=window.scrollY,l=a?80:100,r=a?120:200;o>l&&!c?(c=!0,e.classList.add("scrolled"),t&&!a&&t.classList.add("scrolled"),i.classList.add("header-scrolled")):o<=l&&c&&(c=!1,e.classList.remove("scrolled"),t&&t.classList.remove("scrolled"),i.classList.remove("header-scrolled")),a||(o>r&&!s?(s=!0,e.classList.add("compact"),i.classList.add("header-compact")):o<=r&&s&&(s=!1,e.classList.remove("compact"),i.classList.remove("header-compact")))},u=()=>{n||(setTimeout(()=>{h(),n=!1},d),n=!0)},m=()=>{a=window.innerWidth<=768,a&&s&&(s=!1,e.classList.remove("compact"),i.classList.remove("header-compact"))};HPH.events.on(window,"scroll",u,{passive:!0}),HPH.events.on(window,"resize",m,{passive:!0}),h()}}});
