var d=(c,e)=>()=>(e||c((e={exports:{}}).exports,e),e.exports);var f=d((m,u)=>{(function(c){window.HPH=window.HPH||{initialized:!1,modules:new Map,config:{},register:function(e,t){if(this.modules.set(e,t),this.initialized)try{t(this.config)}catch(i){console.error("Error initializing late module ".concat(e,":"),i)}},init:function(e={}){this.initialized||(this.config={...this.getDefaultConfig(),...e},this.initCore(),this.initModules(),this.initEventListeners(),this.initialized=!0,c(document).trigger("hph:initialized"),this.config.debug&&console.log("HPH Core initialized with",this.modules.size,"modules"))},initModules:function(){this.modules.forEach((e,t)=>{try{if(typeof e=="function"){const i=e(this.config);i&&typeof i.init=="function"&&i.init()}}catch(i){console.error("Error initializing module ".concat(t,":"),i)}}),this.initUniversalCarousels()},events:{on:function(e,t,i,n={}){if(!e||!t||!i){console.warn("HPH.events.on: Missing required parameters");return}if(NodeList.prototype.isPrototypeOf(e)||Array.isArray(e)){Array.from(e).forEach(s=>{this.on(s,t,i,n)});return}e.addEventListener?e.addEventListener(t,i,n):e.attachEvent&&e.attachEvent("on"+t,i)},off:function(e,t,i,n={}){if(!e||!t||!i){console.warn("HPH.events.off: Missing required parameters");return}if(NodeList.prototype.isPrototypeOf(e)||Array.isArray(e)){Array.from(e).forEach(s=>{this.off(s,t,i,n)});return}e.removeEventListener?e.removeEventListener(t,i,n):e.detachEvent&&e.detachEvent("on"+t,i)},trigger:function(e,t,i={}){if(!e||!t){console.warn("HPH.events.trigger: Missing required parameters");return}let n;typeof CustomEvent=="function"?n=new CustomEvent(t,{detail:i,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent"),n.initCustomEvent(t,!0,!0,i)),e.dispatchEvent(n)},delegate:function(e,t,i,n){this.on(e,i,function(s){(s.target.matches(t)||s.target.closest(t))&&n.call(s.target.closest(t),s)})}},getDefaultConfig:function(){return{ajaxUrl:window.ajaxurl||"/wp-admin/admin-ajax.php",nonce:window.hphNonce||"",debug:window.hphDebug||!1,selectors:{forms:"[data-route-type], .hph-form, .hph-general-contact-form, .hph-property-inquiry-form, .hph-agent-contact-form",navigation:".hph-navigation, .hph-mobile-menu",modals:".hph-modal",cards:".hph-card",galleries:".hph-gallery",maps:".hph-map"},classes:{loading:"hph-loading",error:"is-invalid",success:"is-valid",active:"active"}}},initCore:function(){this.initUnifiedFormSystem(),this.initUnifiedNavigation(),this.initUnifiedNotifications(),this.initUnifiedAjax(),this.initUnifiedUtils()},initUnifiedFormSystem:function(){const e=document.querySelectorAll(this.config.selectors.forms);this.forms={validators:{required:t=>t.trim()!=="",email:t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),phone:t=>/^[\d\s\-\+\(\)\.]+$/.test(t),url:t=>/^https?:\/\/.+/.test(t),number:t=>!isNaN(t)&&t!=="",minLength:(t,i)=>t.length>=i,maxLength:(t,i)=>t.length<=i},validateField:function(t){const i=t.value.trim();let n=!0,s="";if(t.hasAttribute("required")&&!HPH.forms.validators.required(i)&&(n=!1,s="This field is required"),i&&n)switch(t.type){case"email":HPH.forms.validators.email(i)||(n=!1,s="Please enter a valid email address");break;case"tel":HPH.forms.validators.phone(i)||(n=!1,s="Please enter a valid phone number");break;case"url":HPH.forms.validators.url(i)||(n=!1,s="Please enter a valid URL");break;case"number":HPH.forms.validators.number(i)||(n=!1,s="Please enter a valid number");break}if(i&&n){const o=t.getAttribute("data-min-length");o&&!HPH.forms.validators.minLength(i,parseInt(o))&&(n=!1,s="Minimum ".concat(o," characters required"));const r=t.getAttribute("data-max-length");r&&!HPH.forms.validators.maxLength(i,parseInt(r))&&(n=!1,s="Maximum ".concat(r," characters allowed"))}return HPH.forms.toggleFieldError(t,n,s),n},validateForm:function(t){let i=!0;return t.querySelectorAll("input, select, textarea").forEach(s=>{HPH.forms.validateField(s)||(i=!1)}),i},toggleFieldError:function(t,i,n){const s=t.closest(".hph-form-field")||t.parentElement;if(i){t.classList.remove(HPH.config.classes.error),t.classList.add(HPH.config.classes.success),s.classList.remove("has-error");const o=s.querySelector(".hph-field-error");o&&o.remove()}else{t.classList.remove(HPH.config.classes.success),t.classList.add(HPH.config.classes.error),s.classList.add("has-error");let o=s.querySelector(".hph-field-error");o||(o=document.createElement("div"),o.className="hph-field-error",s.appendChild(o)),o.textContent=n}},submitForm:function(t,i={}){const n=t.getAttribute("data-action")||"hph_form_submit",s=t.hasAttribute("data-ajax")||t.classList.contains("hph-ajax-form");return HPH.forms.validateForm(t)?s?HPH.ajax.submitForm(t,{action:n,...i}):!0:!1}},e.forEach(t=>{t.addEventListener("submit",function(n){HPH.forms.submitForm(this)||n.preventDefault()}),t.querySelectorAll("input, select, textarea").forEach(n=>{n.addEventListener("blur",function(){HPH.forms.validateField(this)})})})},initUnifiedNavigation:function(){this.navigation={initMobileMenu:function(){const e=document.querySelector(".hph-mobile-menu-toggle"),t=document.querySelector(".hph-mobile-menu");e&&t&&e.addEventListener("click",function(){t.classList.toggle(HPH.config.classes.active),document.body.classList.toggle("mobile-menu-open"),this.setAttribute("aria-expanded",t.classList.contains(HPH.config.classes.active))})},initDropdowns:function(){document.querySelectorAll(".hph-dropdown-toggle").forEach(t=>{t.addEventListener("click",function(i){i.preventDefault();const n=this.nextElementSibling;n&&n.classList.contains("hph-dropdown-menu")&&(document.querySelectorAll(".hph-dropdown-menu.active").forEach(s=>{s!==n&&s.classList.remove(HPH.config.classes.active)}),n.classList.toggle(HPH.config.classes.active))})}),document.addEventListener("click",function(t){t.target.closest(".hph-dropdown")||document.querySelectorAll(".hph-dropdown-menu.active").forEach(i=>{i.classList.remove(HPH.config.classes.active)})})},initSearch:function(){document.querySelectorAll(".hph-search-form").forEach(t=>{const i=t.querySelector('input[type="search"]');i&&i.hasAttribute("data-autocomplete")&&HPH.navigation.initSearchAutocomplete(i)})},initSearchAutocomplete:function(e){let t;e.addEventListener("input",function(){clearTimeout(t);const i=this.value.trim();i.length>=3&&(t=setTimeout(()=>{HPH.ajax.request({data:{action:"hph_search_autocomplete",query:i}}).done(function(n){n.success&&HPH.navigation.showSearchSuggestions(e,n.data)})},300))})},showSearchSuggestions:function(e,t){let i=e.parentElement.querySelector(".hph-search-suggestions");i||(i=document.createElement("div"),i.className="hph-search-suggestions",e.parentElement.appendChild(i)),t.length>0?(i.innerHTML=t.map(n=>'<div class="hph-search-suggestion" data-value="'.concat(n.title,'">\n                                <span class="suggestion-title">').concat(n.title,'</span>\n                                <span class="suggestion-type">').concat(n.type,"</span>\n                            </div>")).join(""),i.style.display="block",i.querySelectorAll(".hph-search-suggestion").forEach(n=>{n.addEventListener("click",function(){e.value=this.getAttribute("data-value"),i.style.display="none"})})):i.style.display="none"}},this.navigation.initMobileMenu(),this.navigation.initDropdowns(),this.navigation.initSearch()},initUnifiedNotifications:function(){this.notifications={container:null,init:function(){this.container=document.querySelector(".hph-notifications"),this.container||(this.container=document.createElement("div"),this.container.className="hph-notifications",document.body.appendChild(this.container))},show:function(e,t="info",i=5e3){this.container||this.init();const n=document.createElement("div");return n.className="hph-notification hph-notification--".concat(t),n.innerHTML='\n                        <div class="hph-notification__content">\n                            <span class="hph-notification__message">'.concat(e,'</span>\n                            <button type="button" class="hph-notification__close" aria-label="Close">&times;</button>\n                        </div>\n                    '),this.container.appendChild(n),i>0&&setTimeout(()=>{n.parentNode&&n.remove()},i),n.querySelector(".hph-notification__close").addEventListener("click",()=>{n.remove()}),n},success:function(e,t){return this.show(e,"success",t)},error:function(e,t){return this.show(e,"error",t)},warning:function(e,t){return this.show(e,"warning",t)},info:function(e,t){return this.show(e,"info",t)}}},initUnifiedAjax:function(){this.ajax={request:function(e){const i={...{url:HPH.config.ajaxUrl,method:"POST",dataType:"json",data:{nonce:HPH.config.nonce},timeout:3e4},...e};return c.ajax(i).fail(function(n,s,o){var a,l;const r=((l=(a=n.responseJSON)==null?void 0:a.data)==null?void 0:l.message)||"An error occurred. Please try again.";HPH.config.debug&&console.error("AJAX Error:",{status:s,error:o,response:n.responseText}),HPH.notifications.error(r)})},submitForm:function(e,t={}){const i=new FormData(e),n={...t};for(let[s,o]of i.entries())n[s]=o;return this.request({data:n,beforeSend:function(){e.classList.add(HPH.config.classes.loading);const s=e.querySelector('button[type="submit"]');s&&(s.disabled=!0,s.setAttribute("data-original-text",s.textContent),s.textContent="Submitting...")},complete:function(){e.classList.remove(HPH.config.classes.loading);const s=e.querySelector('button[type="submit"]');if(s){s.disabled=!1;const o=s.getAttribute("data-original-text");o&&(s.textContent=o)}}}).done(function(s){s.success?(HPH.notifications.success(s.data.message||"Form submitted successfully"),e.reset(),c(e).trigger("hph:form:success",s)):(HPH.notifications.error(s.data.message||"Form submission failed"),c(e).trigger("hph:form:error",s))})},loadContent:function(e,t,i={}){const n=document.querySelector(e);if(n)return this.request({url:t,data:{action:"hph_load_content",...i},beforeSend:function(){n.classList.add(HPH.config.classes.loading)},complete:function(){n.classList.remove(HPH.config.classes.loading)}}).done(function(s){s.success&&(n.innerHTML=s.data.content,HPH.initDynamicContent(n))})}}},initUnifiedUtils:function(){this.debounce=function(e,t,i){let n;return function(){const o=this,r=arguments,a=function(){n=null,i||e.apply(o,r)},l=i&&!n;clearTimeout(n),n=setTimeout(a,t),l&&e.apply(o,r)}},this.throttle=function(e,t){let i;return function(){const n=arguments,s=this;i||(e.apply(s,n),i=!0,setTimeout(()=>i=!1,t))}},this.utils={debounce:this.debounce,throttle:this.throttle,isInViewport:function(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},lazyLoad:function(e,t,i={}){const s={...{root:null,rootMargin:"50px",threshold:.1},...i},o=new IntersectionObserver(r=>{r.forEach(a=>{a.isIntersecting&&(t(a.target),o.unobserve(a.target))})},s);return document.querySelectorAll(e).forEach(r=>{o.observe(r)}),o}}},initEventListeners:function(){document.addEventListener("keydown",function(e){if(e.key==="Escape"){document.querySelectorAll(".hph-modal.active").forEach(i=>{i.classList.remove(HPH.config.classes.active)}),document.querySelectorAll(".hph-dropdown-menu.active").forEach(i=>{i.classList.remove(HPH.config.classes.active)});const t=document.querySelector(".hph-mobile-menu.active");t&&(t.classList.remove(HPH.config.classes.active),document.body.classList.remove("mobile-menu-open"))}}),document.addEventListener("click",function(e){if(e.target.matches("[data-modal-target]")){e.preventDefault();const t=e.target.getAttribute("data-modal-target"),i=document.querySelector(t);i&&i.classList.add(HPH.config.classes.active)}if(e.target.matches(".hph-modal-close")){const t=e.target.closest(".hph-modal");t&&t.classList.remove(HPH.config.classes.active)}if(e.target.matches(".hph-accordion-toggle")){e.preventDefault();const t=e.target.nextElementSibling;t&&t.classList.contains("hph-accordion-content")&&(t.classList.toggle(HPH.config.classes.active),e.target.setAttribute("aria-expanded",t.classList.contains(HPH.config.classes.active)))}})},initDynamicContent:function(e){e.querySelectorAll(this.config.selectors.forms).forEach(i=>{i.addEventListener("submit",function(s){HPH.forms.submitForm(this)||s.preventDefault()}),i.querySelectorAll("input, select, textarea").forEach(s=>{s.addEventListener("blur",function(){HPH.forms.validateField(this)})})}),this.navigation.initDropdowns(),this.initUniversalCarousels(e)},initUniversalCarousels:function(e=document){const t=e.querySelectorAll(".hph-carousel__container");if(t.length!==0){if(typeof HphUniversalCarousel>"u"){console.warn("Universal Carousel class not loaded, attempting to load..."),this.loadUniversalCarousel();return}t.forEach((i,n)=>{try{if(i.hphCarousel)return;const s=new HphUniversalCarousel(i);i.hphCarousel=s,this.config.debug&&console.log("Universal Carousel initialized:",i.id||"carousel-".concat(n))}catch(s){console.error("Error initializing carousel:",s)}})}},loadUniversalCarousel:function(){if(this._carouselLoading)return;this._carouselLoading=!0;const e=document.createElement("script");e.src="/wp-content/themes/happy-place-theme/assets/js/components/universal-carousel.js",e.onload=()=>{this._carouselLoading=!1,this.initUniversalCarousels()},e.onerror=()=>{this._carouselLoading=!1,console.error("Failed to load Universal Carousel script")},document.head.appendChild(e)}},c(document).ready(function(){const e={nonce:window.hphNonce||"",debug:window.hphDebug||!1};HPH.init(e)}),typeof u<"u"&&u.exports&&(u.exports=HPH)})(jQuery)});export default f();
