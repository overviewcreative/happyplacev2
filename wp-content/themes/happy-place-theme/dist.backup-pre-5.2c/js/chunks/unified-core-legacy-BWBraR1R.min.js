System.register([],function(t,n){"use strict";return{execute:function(){var t;t=jQuery,window.HPH=window.HPH||{initialized:!1,modules:new Map,config:{},register:function(t,n){if(this.modules.set(t,n),this.initialized)try{n(this.config)}catch(i){}},init:function(n={}){this.initialized||(this.config={...this.getDefaultConfig(),...n},this.initCore(),this.initModules(),this.initEventListeners(),this.initialized=!0,t(document).trigger("hph:initialized"),this.config.debug)},initModules:function(){this.modules.forEach((t,n)=>{try{if("function"==typeof t){const n=t(this.config);n&&"function"==typeof n.init&&n.init()}}catch(i){}}),this.initUniversalCarousels()},events:{on:function(t,n,i,e={}){t&&n&&i&&(NodeList.prototype.isPrototypeOf(t)||Array.isArray(t)?Array.from(t).forEach(t=>{this.on(t,n,i,e)}):t.addEventListener?t.addEventListener(n,i,e):t.attachEvent&&t.attachEvent("on"+n,i))},off:function(t,n,i,e={}){t&&n&&i&&(NodeList.prototype.isPrototypeOf(t)||Array.isArray(t)?Array.from(t).forEach(t=>{this.off(t,n,i,e)}):t.removeEventListener?t.removeEventListener(n,i,e):t.detachEvent&&t.detachEvent("on"+n,i))},trigger:function(t,n,i={}){if(!t||!n)return;let e;"function"==typeof CustomEvent?e=new CustomEvent(n,{detail:i,bubbles:!0,cancelable:!0}):(e=document.createEvent("CustomEvent"),e.initCustomEvent(n,!0,!0,i)),t.dispatchEvent(e)},delegate:function(t,n,i,e){this.on(t,i,function(t){(t.target.matches(n)||t.target.closest(n))&&e.call(t.target.closest(n),t)})}},getDefaultConfig:function(){return{ajaxUrl:window.ajaxurl||"/wp-admin/admin-ajax.php",nonce:window.hphNonce||"",debug:window.hphDebug||!1,selectors:{forms:"[data-route-type], .hph-form, .hph-general-contact-form, .hph-property-inquiry-form, .hph-agent-contact-form",navigation:".hph-navigation, .hph-mobile-menu",modals:".hph-modal",cards:".hph-card",galleries:".hph-gallery",maps:".hph-map"},classes:{loading:"hph-loading",error:"is-invalid",success:"is-valid",active:"active"}}},initCore:function(){this.initUnifiedFormSystem(),this.initUnifiedNavigation(),this.initUnifiedNotifications(),this.initUnifiedAjax(),this.initUnifiedUtils()},initUnifiedFormSystem:function(){const t=document.querySelectorAll(this.config.selectors.forms);this.forms={validators:{required:t=>""!==t.trim(),email:t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),phone:t=>/^[\d\s\-\+\(\)\.]+$/.test(t),url:t=>/^https?:\/\/.+/.test(t),number:t=>!isNaN(t)&&""!==t,minLength:(t,n)=>t.length>=n,maxLength:(t,n)=>t.length<=n},validateField:function(t){const n=t.value.trim();let i=!0,e="";if(t.hasAttribute("required")&&!HPH.forms.validators.required(n)&&(i=!1,e="This field is required"),n&&i)switch(t.type){case"email":HPH.forms.validators.email(n)||(i=!1,e="Please enter a valid email address");break;case"tel":HPH.forms.validators.phone(n)||(i=!1,e="Please enter a valid phone number");break;case"url":HPH.forms.validators.url(n)||(i=!1,e="Please enter a valid URL");break;case"number":HPH.forms.validators.number(n)||(i=!1,e="Please enter a valid number")}if(n&&i){const o=t.getAttribute("data-min-length");o&&!HPH.forms.validators.minLength(n,parseInt(o))&&(i=!1,e=`Minimum ${o} characters required`);const s=t.getAttribute("data-max-length");s&&!HPH.forms.validators.maxLength(n,parseInt(s))&&(i=!1,e=`Maximum ${s} characters allowed`)}return HPH.forms.toggleFieldError(t,i,e),i},validateForm:function(t){let n=!0;return t.querySelectorAll("input, select, textarea").forEach(t=>{HPH.forms.validateField(t)||(n=!1)}),n},toggleFieldError:function(t,n,i){const e=t.closest(".hph-form-field")||t.parentElement;if(n){t.classList.remove(HPH.config.classes.error),t.classList.add(HPH.config.classes.success),e.classList.remove("has-error");const n=e.querySelector(".hph-field-error");n&&n.remove()}else{t.classList.remove(HPH.config.classes.success),t.classList.add(HPH.config.classes.error),e.classList.add("has-error");let n=e.querySelector(".hph-field-error");n||(n=document.createElement("div"),n.className="hph-field-error",e.appendChild(n)),n.textContent=i}},submitForm:function(t,n={}){const i=t.getAttribute("data-action")||"hph_form_submit",e=t.hasAttribute("data-ajax")||t.classList.contains("hph-ajax-form");return!!HPH.forms.validateForm(t)&&(!e||HPH.ajax.submitForm(t,{action:i,...n}))}},t.forEach(t=>{t.addEventListener("submit",function(t){HPH.forms.submitForm(this)||t.preventDefault()}),t.querySelectorAll("input, select, textarea").forEach(t=>{t.addEventListener("blur",function(){HPH.forms.validateField(this)})})})},initUnifiedNavigation:function(){this.navigation={initMobileMenu:function(){const t=document.querySelector(".hph-mobile-menu-toggle"),n=document.querySelector(".hph-mobile-menu");t&&n&&t.addEventListener("click",function(){n.classList.toggle(HPH.config.classes.active),document.body.classList.toggle("mobile-menu-open"),this.setAttribute("aria-expanded",n.classList.contains(HPH.config.classes.active))})},initDropdowns:function(){document.querySelectorAll(".hph-dropdown-toggle").forEach(t=>{t.addEventListener("click",function(t){t.preventDefault();const n=this.nextElementSibling;n&&n.classList.contains("hph-dropdown-menu")&&(document.querySelectorAll(".hph-dropdown-menu.active").forEach(t=>{t!==n&&t.classList.remove(HPH.config.classes.active)}),n.classList.toggle(HPH.config.classes.active))})}),document.addEventListener("click",function(t){t.target.closest(".hph-dropdown")||document.querySelectorAll(".hph-dropdown-menu.active").forEach(t=>{t.classList.remove(HPH.config.classes.active)})})},initSearch:function(){document.querySelectorAll(".hph-search-form").forEach(t=>{const n=t.querySelector('input[type="search"]');n&&n.hasAttribute("data-autocomplete")&&HPH.navigation.initSearchAutocomplete(n)})},initSearchAutocomplete:function(t){let n;t.addEventListener("input",function(){clearTimeout(n);const i=this.value.trim();i.length>=3&&(n=setTimeout(()=>{HPH.ajax.request({data:{action:"hph_search_autocomplete",query:i}}).done(function(n){n.success&&HPH.navigation.showSearchSuggestions(t,n.data)})},300))})},showSearchSuggestions:function(t,n){let i=t.parentElement.querySelector(".hph-search-suggestions");i||(i=document.createElement("div"),i.className="hph-search-suggestions",t.parentElement.appendChild(i)),n.length>0?(i.innerHTML=n.map(t=>`<div class="hph-search-suggestion" data-value="${t.title}">\n                                <span class="suggestion-title">${t.title}</span>\n                                <span class="suggestion-type">${t.type}</span>\n                            </div>`).join(""),i.style.display="block",i.querySelectorAll(".hph-search-suggestion").forEach(n=>{n.addEventListener("click",function(){t.value=this.getAttribute("data-value"),i.style.display="none"})})):i.style.display="none"}},this.navigation.initMobileMenu(),this.navigation.initDropdowns(),this.navigation.initSearch()},initUnifiedNotifications:function(){this.notifications={container:null,init:function(){this.container=document.querySelector(".hph-notifications"),this.container||(this.container=document.createElement("div"),this.container.className="hph-notifications",document.body.appendChild(this.container))},show:function(t,n="info",i=5e3){this.container||this.init();const e=document.createElement("div");return e.className=`hph-notification hph-notification--${n}`,e.innerHTML=`\n                        <div class="hph-notification__content">\n                            <span class="hph-notification__message">${t}</span>\n                            <button type="button" class="hph-notification__close" aria-label="Close">&times;</button>\n                        </div>\n                    `,this.container.appendChild(e),i>0&&setTimeout(()=>{e.parentNode&&e.remove()},i),e.querySelector(".hph-notification__close").addEventListener("click",()=>{e.remove()}),e},success:function(t,n){return this.show(t,"success",n)},error:function(t,n){return this.show(t,"error",n)},warning:function(t,n){return this.show(t,"warning",n)},info:function(t,n){return this.show(t,"info",n)}}},initUnifiedAjax:function(){this.ajax={request:function(n){const i={url:HPH.config.ajaxUrl,method:"POST",dataType:"json",data:{nonce:HPH.config.nonce},timeout:3e4,...n};return t.ajax(i).fail(function(t,n,i){const e=t.responseJSON?.data?.message||"An error occurred. Please try again.";HPH.config.debug,HPH.notifications.error(e)})},submitForm:function(n,i={}){const e=new FormData(n),o={...i};for(let[t,s]of e.entries())o[t]=s;return this.request({data:o,beforeSend:function(){n.classList.add(HPH.config.classes.loading);const t=n.querySelector('button[type="submit"]');t&&(t.disabled=!0,t.setAttribute("data-original-text",t.textContent),t.textContent="Submitting...")},complete:function(){n.classList.remove(HPH.config.classes.loading);const t=n.querySelector('button[type="submit"]');if(t){t.disabled=!1;const n=t.getAttribute("data-original-text");n&&(t.textContent=n)}}}).done(function(i){i.success?(HPH.notifications.success(i.data.message||"Form submitted successfully"),n.reset(),t(n).trigger("hph:form:success",i)):(HPH.notifications.error(i.data.message||"Form submission failed"),t(n).trigger("hph:form:error",i))})},loadContent:function(t,n,i={}){const e=document.querySelector(t);if(e)return this.request({url:n,data:{action:"hph_load_content",...i},beforeSend:function(){e.classList.add(HPH.config.classes.loading)},complete:function(){e.classList.remove(HPH.config.classes.loading)}}).done(function(t){t.success&&(e.innerHTML=t.data.content,HPH.initDynamicContent(e))})}}},initUnifiedUtils:function(){this.debounce=function(t,n,i){let e;return function(){const o=this,s=arguments,c=i&&!e;clearTimeout(e),e=setTimeout(function(){e=null,i||t.apply(o,s)},n),c&&t.apply(o,s)}},this.throttle=function(t,n){let i;return function(){const e=arguments;i||(t.apply(this,e),i=!0,setTimeout(()=>i=!1,n))}},this.utils={debounce:this.debounce,throttle:this.throttle,isInViewport:function(t){const n=t.getBoundingClientRect();return n.top>=0&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth)},lazyLoad:function(t,n,i={}){const e={root:null,rootMargin:"50px",threshold:.1,...i},o=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(n(t.target),o.unobserve(t.target))})},e);return document.querySelectorAll(t).forEach(t=>{o.observe(t)}),o}}},initEventListeners:function(){document.addEventListener("keydown",function(t){if("Escape"===t.key){document.querySelectorAll(".hph-modal.active").forEach(t=>{t.classList.remove(HPH.config.classes.active)}),document.querySelectorAll(".hph-dropdown-menu.active").forEach(t=>{t.classList.remove(HPH.config.classes.active)});const t=document.querySelector(".hph-mobile-menu.active");t&&(t.classList.remove(HPH.config.classes.active),document.body.classList.remove("mobile-menu-open"))}}),document.addEventListener("click",function(t){if(t.target.matches("[data-modal-target]")){t.preventDefault();const n=t.target.getAttribute("data-modal-target"),i=document.querySelector(n);i&&i.classList.add(HPH.config.classes.active)}if(t.target.matches(".hph-modal-close")){const n=t.target.closest(".hph-modal");n&&n.classList.remove(HPH.config.classes.active)}if(t.target.matches(".hph-accordion-toggle")){t.preventDefault();const n=t.target.nextElementSibling;n&&n.classList.contains("hph-accordion-content")&&(n.classList.toggle(HPH.config.classes.active),t.target.setAttribute("aria-expanded",n.classList.contains(HPH.config.classes.active)))}})},initDynamicContent:function(t){t.querySelectorAll(this.config.selectors.forms).forEach(t=>{t.addEventListener("submit",function(t){HPH.forms.submitForm(this)||t.preventDefault()}),t.querySelectorAll("input, select, textarea").forEach(t=>{t.addEventListener("blur",function(){HPH.forms.validateField(this)})})}),this.navigation.initDropdowns(),this.initUniversalCarousels(t)},initUniversalCarousels:function(t=document){const n=t.querySelectorAll(".hph-carousel__container");0!==n.length&&("undefined"!=typeof HphUniversalCarousel?n.forEach((t,n)=>{try{if(t.hphCarousel)return;const n=new HphUniversalCarousel(t);t.hphCarousel=n,this.config.debug}catch(i){}}):this.loadUniversalCarousel())},loadUniversalCarousel:function(){if(this.t)return;this.t=!0;const t=document.createElement("script");t.src="/wp-content/themes/happy-place-theme/assets/js/components/universal-carousel.js",t.onload=()=>{this.t=!1,this.initUniversalCarousels()},t.onerror=()=>{this.t=!1},document.head.appendChild(t)}},t(document).ready(function(){const t={nonce:window.hphNonce||"",debug:window.hphDebug||!1};HPH.init(t)}),void 0!==n&&n.exports&&(n.exports=HPH)}}});
