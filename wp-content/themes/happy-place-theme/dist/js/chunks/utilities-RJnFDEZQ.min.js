(function(e){window.HappyPlaceTheme={init:function(){this.initThemeFeatures(),this.initWordPressIntegration(),this.initCustomizations(),this.initContactForms(),this.initPropertyFeatures()},initThemeFeatures:function(){this.initSmoothScroll(),this.initBackToTop(),this.initLoadingAnimations(),this.initCookieConsent()},initWordPressIntegration:function(){this.initCommentForms(),this.initSearchEnhancements(),this.initWidgetEnhancements(),this.initCustomizerPreview()},initCustomizations:function(){this.initCustomSelects(),this.initTooltips(),this.initCopyToClipboard(),this.initPrintFeatures()},initSmoothScroll:function(){e('a[href*="#"]:not([href="#"])').on("click",function(o){var t=e(this.hash),i=e(".site-header").outerHeight()||0;t.length&&(o.preventDefault(),e("html, body").animate({scrollTop:t.offset().top-i-20},800,"easeInOutCubic"))})},initBackToTop:function(){e(".back-to-top").length||e("body").append('\n                    <button type="button" class="back-to-top hph-btn hph-btn-primary hph-btn-icon" aria-label="Back to top">\n                        <i class="fas fa-chevron-up"></i>\n                    </button>\n                ');var o=e(".back-to-top");e(window).on("scroll",HPH.throttle(function(){var t=e(window).scrollTop();t>500?o.addClass("visible"):o.removeClass("visible")},100)),o.on("click",function(t){t.preventDefault(),e("html, body").animate({scrollTop:0},800,"easeInOutCubic")})},initLoadingAnimations:function(){if(e(".fade-in-on-load").each(function(){e(this).css("opacity","0").animate({opacity:1},600)}),"IntersectionObserver"in window){var o=new IntersectionObserver(function(t){t.forEach(function(i){i.isIntersecting&&i.target.classList.add("in-view")})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".animate-on-scroll").forEach(function(t){o.observe(t)})}},initCookieConsent:function(){localStorage.getItem("cookieConsent")!=="accepted"&&this.showCookieConsent()},showCookieConsent:function(){var o='\n                <div id="hph-cookie-consent" class="hph-cookie-consent">\n                    <div class="hph-cookie-consent-content">\n                        <p>We use cookies to enhance your browsing experience and analyze our traffic. By clicking "Accept All", you consent to our use of cookies.</p>\n                        <div class="hph-cookie-consent-actions">\n                            <button type="button" class="hph-accept-cookies hph-btn hph-btn-primary hph-btn-sm">Accept All</button>\n                            <button type="button" class="hph-decline-cookies hph-btn hph-btn-outline hph-btn-sm">Decline</button>\n                            <a href="/legal/#privacy" class="hph-text-sm hph-underline">Privacy Policy</a>\n                        </div>\n                    </div>\n                </div>\n            ';e("body").append(o),setTimeout(function(){e("#hph-cookie-consent").addClass("visible")},100),e(".hph-accept-cookies").on("click",function(){localStorage.setItem("cookieConsent","accepted"),e("#hph-cookie-consent").removeClass("visible"),setTimeout(function(){e("#hph-cookie-consent").remove()},300)}),e(".hph-decline-cookies").on("click",function(){localStorage.setItem("cookieConsent","declined"),e("#hph-cookie-consent").removeClass("visible"),setTimeout(function(){e("#hph-cookie-consent").remove()},300)})},initContactForms:function(){e(".contact-form").on("submit",function(o){o.preventDefault();var t=e(this),i=t.find('[type="submit"]'),a=i.text();i.prop("disabled",!0).text("Sending...");var n=new FormData(this);n.append("action","hph_contact_form"),n.append("nonce",happyPlace.nonce),e.ajax({url:happyPlace.ajaxUrl,type:"POST",data:n,processData:!1,contentType:!1,success:function(s){s.success?(HPH.showAlert("Message sent successfully!","success"),t[0].reset()):HPH.showAlert(s.data.message||"Failed to send message","error")},error:function(){HPH.showAlert("An error occurred while sending your message","error")},complete:function(){i.prop("disabled",!1).text(a)}})})},initPropertyFeatures:function(){this.initPropertyComparison(),this.initFavoriteProperties(),this.initPropertySharing(),this.initPropertyAlerts()},initPropertyComparison:function(){e(".compare-property").on("click",function(t){t.preventDefault();var i=e(this),a=i.data("property-id"),n=i.hasClass("comparing");n?(HappyPlaceTheme.removeFromComparison(a),i.removeClass("comparing").find(".btn-text").text("Compare")):(HappyPlaceTheme.addToComparison(a),i.addClass("comparing").find(".btn-text").text("Remove from Compare")),HappyPlaceTheme.updateComparisonUI()});var o=JSON.parse(localStorage.getItem("propertyComparison")||"[]");o.forEach(function(t){e('.compare-property[data-property-id="'.concat(t,'"]')).addClass("comparing").find(".btn-text").text("Remove from Compare")}),o.length>0&&this.updateComparisonUI()},addToComparison:function(o){var t=JSON.parse(localStorage.getItem("propertyComparison")||"[]");return t.length>=3?(HPH.showAlert("You can compare up to 3 properties at a time","warning"),!1):(t.indexOf(o)===-1&&(t.push(o),localStorage.setItem("propertyComparison",JSON.stringify(t))),!0)},removeFromComparison:function(o){var t=JSON.parse(localStorage.getItem("propertyComparison")||"[]"),i=t.indexOf(o);i>-1&&(t.splice(i,1),localStorage.setItem("propertyComparison",JSON.stringify(t)))},updateComparisonUI:function(){var o=JSON.parse(localStorage.getItem("propertyComparison")||"[]"),t=e("#comparison-bar");if(o.length>0){if(t.length)t.find(".comparison-count").text(o.length+" properties selected");else{var i='\n                        <div id="comparison-bar" class="comparison-bar">\n                            <div class="comparison-content">\n                                <span class="comparison-count">'.concat(o.length,' properties selected</span>\n                                <div class="comparison-actions">\n                                    <button type="button" class="compare-now hph-btn hph-btn-primary hph-btn-sm">Compare Now</button>\n                                    <button type="button" class="clear-comparison hph-btn hph-btn-outline hph-btn-sm">Clear All</button>\n                                </div>\n                            </div>\n                        </div>\n                    ');e("body").append(i),e(".compare-now").on("click",function(){window.location.href="/compare-properties?ids="+o.join(",")}),e(".clear-comparison").on("click",function(){localStorage.removeItem("propertyComparison"),e(".compare-property").removeClass("comparing").find(".btn-text").text("Compare"),e("#comparison-bar").remove()})}t.addClass("visible")}else t.remove()},initFavoriteProperties:function(){e(".favorite-property").on("click",function(o){o.preventDefault();var t=e(this),i=t.data("property-id"),a=t.hasClass("favorited");e.ajax({url:happyPlace.ajaxUrl,type:"POST",data:{action:"hph_toggle_favorite",nonce:happyPlace.nonce,property_id:i,is_favorited:a},success:function(n){if(n.success){t.toggleClass("favorited");var s=t.find("i");t.hasClass("favorited")?(s.removeClass("far").addClass("fas"),HPH.showAlert("Added to favorites","success")):(s.removeClass("fas").addClass("far"),HPH.showAlert("Removed from favorites","info"))}}})})},initPropertySharing:function(){e(".share-property").on("click",function(o){o.preventDefault();var t=e(this).data("property-title")||document.title,i=e(this).data("property-url")||window.location.href;navigator.share?navigator.share({title:t,url:i}):HappyPlaceTheme.showShareModal(t,i)})},showShareModal:function(o,t){var i=encodeURIComponent(t),a=encodeURIComponent(o),n='\n                <div id="share-modal" class="hph-modal">\n                    <div class="hph-modal-content">\n                        <div class="hph-modal-header">\n                            <h3>Share Property</h3>\n                            <button type="button" class="hph-modal-close">&times;</button>\n                        </div>\n                        <div class="hph-modal-body">\n                            <div class="share-options hph-grid hph-grid-cols-2 hph-gap-4">\n                                <a href="https://www.facebook.com/sharer/sharer.php?u='.concat(i,'" target="_blank" class="share-option facebook">\n                                    <i class="fab fa-facebook-f"></i> Facebook\n                                </a>\n                                <a href="https://twitter.com/intent/tweet?url=').concat(i,"&text=").concat(a,'" target="_blank" class="share-option twitter">\n                                    <i class="fab fa-twitter"></i> Twitter\n                                </a>\n                                <a href="https://www.linkedin.com/sharing/share-offsite/?url=').concat(i,'" target="_blank" class="share-option linkedin">\n                                    <i class="fab fa-linkedin-in"></i> LinkedIn\n                                </a>\n                                <button type="button" class="share-option copy-link" data-url="').concat(t,'">\n                                    <i class="fas fa-link"></i> Copy Link\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            ');e("body").append(n),HPH.openModal("share-modal"),e(".copy-link").on("click",function(){var s=e(this).data("url");HPH.copyToClipboard(s),HPH.showAlert("Link copied to clipboard!","success"),HPH.closeModal()}),e(document).on("hph-modal-closed",function(){e("#share-modal").remove()})},initPropertyAlerts:function(){e(".save-search-alert").on("click",function(o){o.preventDefault(),HappyPlaceTheme.showSaveSearchModal()})},showSaveSearchModal:function(){var o='\n                <div id="save-search-modal" class="hph-modal">\n                    <div class="hph-modal-content">\n                        <div class="hph-modal-header">\n                            <h3>Save Your Search</h3>\n                            <button type="button" class="hph-modal-close">&times;</button>\n                        </div>\n                        <div class="hph-modal-body">\n                            <p>Get notified when new properties match your search criteria.</p>\n                            <form class="save-search-form hph-space-y-4">\n                                <div class="hph-form-group">\n                                    <label class="hph-label">Alert Name</label>\n                                    <input type="text" class="hph-input" name="alert_name" required>\n                                </div>\n                                <div class="hph-form-group">\n                                    <label class="hph-label">Email Address</label>\n                                    <input type="email" class="hph-input" name="email" required>\n                                </div>\n                                <div class="hph-form-group">\n                                    <label class="hph-label">Alert Frequency</label>\n                                    <select class="hph-select" name="frequency">\n                                        <option value="immediate">Immediate</option>\n                                        <option value="daily">Daily</option>\n                                        <option value="weekly" selected>Weekly</option>\n                                    </select>\n                                </div>\n                                <button type="submit" class="hph-btn hph-btn-primary hph-w-full">\n                                    Save Search Alert\n                                </button>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n            ';e("body").append(o),HPH.openModal("save-search-modal"),e(".save-search-form").on("submit",function(t){t.preventDefault();var i=new FormData(this);i.append("action","hph_save_search_alert"),i.append("nonce",happyPlace.nonce),e.ajax({url:happyPlace.ajaxUrl,type:"POST",data:i,processData:!1,contentType:!1,success:function(a){a.success?(HPH.showAlert("Search alert saved successfully!","success"),HPH.closeModal()):HPH.showAlert(a.data.message||"Failed to save search alert","error")},error:function(){HPH.showAlert("An error occurred while saving your search alert","error")}})}),e(document).on("hph-modal-closed",function(){e("#save-search-modal").remove()})},initCommentForms:function(){e(".comment-form").addClass("hph-form"),e(".comment-form input, .comment-form textarea").addClass("hph-input"),e('.comment-form input[type="submit"]').addClass("hph-btn hph-btn-primary")},initSearchEnhancements:function(){e(".search-form").each(function(){var o=e(this),t=o.find('input[type="search"]');t.hasClass("enhanced")||(t.addClass("enhanced hph-input"),o.find('input[type="submit"]').addClass("hph-btn hph-btn-primary"))})},initWidgetEnhancements:function(){e(".widget input, .widget select, .widget textarea").addClass("hph-input"),e('.widget input[type="submit"], .widget button').addClass("hph-btn hph-btn-primary")},initCustomizerPreview:function(){typeof wp<"u"&&wp.customize&&wp.customize.preview.bind("active",function(){e("body").addClass("customizer-preview")})},initCustomSelects:function(){e(".custom-select").each(function(){})},initTooltips:function(){e("[data-tooltip]").each(function(){var o=e(this),t=o.data("tooltip");o.on("mouseenter",function(){HappyPlaceTheme.showTooltip(e(this),t)}).on("mouseleave",function(){HappyPlaceTheme.hideTooltip()})})},showTooltip:function(o,t){var i=e('<div class="hph-tooltip">'+t+"</div>");e("body").append(i);var a=o[0].getBoundingClientRect(),n=i[0].getBoundingClientRect();i.css({top:a.top-n.height-10,left:a.left+a.width/2-n.width/2}).addClass("visible")},hideTooltip:function(){e(".hph-tooltip").remove()},initCopyToClipboard:function(){e(".copy-to-clipboard").on("click",function(o){o.preventDefault();var t=e(this).data("copy-text")||e(this).text();HPH.copyToClipboard(t),HPH.showAlert("Copied to clipboard!","success")})},initPrintFeatures:function(){e(".print-page").on("click",function(o){o.preventDefault(),window.print()}),e(".print-section").on("click",function(o){o.preventDefault();var t=e(this).data("print-section");HappyPlaceTheme.printSection(t)})},printSection:function(o){var t=e(o);if(t.length){var i=t.html(),a=window.open("","_blank");a.document.write('\n                    <html>\n                    <head>\n                        <title>Print</title>\n                        <link rel="stylesheet" href="'.concat(happyPlace.themeUrl,'/assets/css/print.css">\n                    </head>\n                    <body>\n                        ').concat(i,"\n                        <script>window.print(); window.close();<\/script>\n                    </body>\n                    </html>\n                ")),a.document.close()}}},e(document).ready(function(){HappyPlaceTheme.init()})})(jQuery);
