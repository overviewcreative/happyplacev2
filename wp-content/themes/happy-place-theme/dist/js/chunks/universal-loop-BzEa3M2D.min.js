var l=(a,t)=>()=>(t||a((t={exports:{}}).exports,t),t.exports);var d=l((u,n)=>{class o{constructor(t){this.container=t,this.track=t.querySelector("[data-carousel-track]"),this.slides=Array.from(t.querySelectorAll(".hph-carousel__slide")),this.prevButton=t.querySelector("[data-carousel-prev]"),this.nextButton=t.querySelector("[data-carousel-next]"),this.dots=Array.from(t.querySelectorAll(".hph-carousel__dot")),this.loading=t.querySelector("[data-carousel-loading]"),console.log("Universal Carousel initialized:",{track:!!this.track,slides:this.slides.length,prevButton:!!this.prevButton,nextButton:!!this.nextButton,dots:this.dots.length}),this.config={postType:t.dataset.postType||"post",autoplay:t.dataset.autoplay==="true",autoplaySpeed:parseInt(t.dataset.autoplaySpeed)||5e3,showNavigation:t.dataset.showNavigation==="true",showDots:t.dataset.showDots==="true",infinite:t.dataset.infinite!=="false"},this.currentIndex=0,this.totalSlides=this.slides.length,this.slidesPerView=this.calculateSlidesPerView(),this.maxIndex=Math.max(0,this.totalSlides-this.slidesPerView),this.autoplayInterval=null,this.isAnimating=!1,this.touchStartX=0,this.touchEndX=0,this.slideWidth=0,this.init()}calculateSlidesPerView(){if(!this.slides.length)return 1;const t=this.container.clientWidth,e=this.slides[0].offsetWidth,i=parseFloat(getComputedStyle(this.container).getPropertyValue("--hph-carousel-gap"))||16;return e<=0?1:Math.floor((t+i)/(e+i))}calculateDimensions(){this.slidesPerView=this.calculateSlidesPerView(),this.maxIndex=Math.max(0,this.totalSlides-this.slidesPerView),this.slideWidth=this.slides.length>0?this.slides[0].offsetWidth:280,this.currentIndex>this.maxIndex&&(this.currentIndex=this.maxIndex)}init(){this.totalSlides!==0&&setTimeout(()=>{this.calculateDimensions(),this.setupResponsive(),this.bindEvents(),this.updateCarousel(),this.config.autoplay&&this.startAutoplay(),this.setupAccessibility(),this.container.classList.add("is-initialized")},100)}setupResponsive(){const t=new ResizeObserver(()=>{this.handleResize()});t.observe(this.container),this.resizeObserver=t,this.handleResize=this.handleResize.bind(this),window.addEventListener("resize",this.handleResize)}handleResize(){clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.calculateDimensions(),this.updateCarousel()},250)}bindEvents(){if(this.prevButton&&this.prevButton.addEventListener("click",()=>this.goToPrevious()),this.nextButton&&this.nextButton.addEventListener("click",()=>this.goToNext()),this.dots.forEach((t,e)=>{t.addEventListener("click",()=>{const i=e*this.slidesPerView;this.goToSlide(i)})}),this.track.addEventListener("touchstart",t=>{this.touchStartX=t.touches[0].clientX,this.pauseAutoplay()}),this.track.addEventListener("touchend",t=>{this.touchEndX=t.changedTouches[0].clientX,this.handleSwipe(),this.resumeAutoplay()}),this.container.addEventListener("mouseenter",()=>{this.pauseAutoplay()}),this.container.addEventListener("mouseleave",()=>{this.resumeAutoplay()}),this.container.addEventListener("keydown",t=>{switch(t.key){case"ArrowLeft":t.preventDefault(),this.goToPrevious();break;case"ArrowRight":t.preventDefault(),this.goToNext();break;case"Home":t.preventDefault(),this.goToSlide(0);break;case"End":t.preventDefault(),this.goToSlide(this.maxIndex);break}}),window.IntersectionObserver){const t=new IntersectionObserver(e=>{e.forEach(i=>{i.isIntersecting&&(this.onCarouselVisible(),t.unobserve(this.container))})});t.observe(this.container)}}handleSwipe(){const t=this.touchEndX-this.touchStartX;Math.abs(t)<50||(t>0?this.goToPrevious():this.goToNext())}goToPrevious(){if(!this.isAnimating)if(this.config.infinite&&this.currentIndex===0)this.goToSlide(this.maxIndex);else{const t=Math.max(0,this.currentIndex-this.slidesPerView);this.goToSlide(t)}}goToNext(){if(!this.isAnimating)if(this.config.infinite&&this.currentIndex>=this.maxIndex)this.goToSlide(0);else{const t=Math.min(this.maxIndex,this.currentIndex+this.slidesPerView);this.goToSlide(t)}}goToSlide(t){this.isAnimating||t===this.currentIndex||(this.isAnimating=!0,this.currentIndex=Math.max(0,Math.min(t,this.maxIndex)),this.updateCarousel(),setTimeout(()=>{this.isAnimating=!1},300),this.container.dispatchEvent(new CustomEvent("slideChanged",{detail:{currentIndex:this.currentIndex,totalSlides:this.totalSlides,postType:this.config.postType}})))}updateCarousel(){const t=parseFloat(getComputedStyle(this.container).getPropertyValue("--hph-carousel-gap"))||16,e=this.slideWidth+t,i=-(this.currentIndex*e);this.track.style.transform="translateX(".concat(i,"px)"),this.updateNavigationStates(),this.updateDotsStates(),this.updateSlideVisibility()}updateNavigationStates(){this.config.infinite?(this.prevButton&&(this.prevButton.disabled=!1),this.nextButton&&(this.nextButton.disabled=!1)):(this.prevButton&&(this.prevButton.disabled=this.currentIndex===0),this.nextButton&&(this.nextButton.disabled=this.currentIndex===this.maxIndex))}updateDotsStates(){this.dots.forEach((t,e)=>{const s=e*this.slidesPerView===this.currentIndex;t.classList.toggle("is-active",s),t.setAttribute("aria-pressed",s.toString())})}updateSlideVisibility(){this.slides.forEach((t,e)=>{const i=e>=this.currentIndex&&e<this.currentIndex+this.slidesPerView;t.setAttribute("aria-hidden",(!i).toString()),i&&this.lazyLoadSlideImages(t)})}lazyLoadSlideImages(t){t.querySelectorAll("img[data-src]").forEach(i=>{i.src=i.dataset.src,i.removeAttribute("data-src"),i.classList.add("is-loaded")})}setupAccessibility(){this.container.setAttribute("role","region"),this.container.setAttribute("aria-label","".concat(this.config.postType," carousel")),this.track.setAttribute("role","group"),this.track.setAttribute("aria-live","polite"),this.track.setAttribute("aria-atomic","false"),this.container.tabIndex===-1&&(this.container.tabIndex=0),this.slides.forEach((t,e)=>{t.setAttribute("role","group"),t.setAttribute("aria-label","".concat(e+1," of ").concat(this.totalSlides))})}startAutoplay(){this.config.autoplay&&(this.autoplayInterval=setInterval(()=>{this.goToNext()},this.config.autoplaySpeed))}pauseAutoplay(){this.autoplayInterval&&(clearInterval(this.autoplayInterval),this.autoplayInterval=null)}resumeAutoplay(){this.config.autoplay&&!this.autoplayInterval&&this.startAutoplay()}onCarouselVisible(){this.container.dispatchEvent(new CustomEvent("carouselVisible",{detail:{postType:this.config.postType,totalSlides:this.totalSlides}}))}destroy(){this.pauseAutoplay(),this.resizeObserver&&this.resizeObserver.disconnect(),this.container.classList.remove("is-initialized")}refresh(){this.slides=Array.from(this.container.querySelectorAll(".hph-carousel__slide")),this.totalSlides=this.slides.length,this.updateSlidesPerView(),this.updateCarousel()}goTo(t){this.goToSlide(t)}getCurrentIndex(){return this.currentIndex}getTotalSlides(){return this.totalSlides}}function r(){const a=document.querySelectorAll(".hph-carousel__container"),t=[];a.forEach((e,i)=>{try{const s=new o(e);t.push(s),e.hphCarousel=s}catch(s){}}),window.HphCarousels=t}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",r):r();typeof jQuery!="undefined"&&jQuery(document).ready(r);typeof n!="undefined"&&n.exports?n.exports=o:window.HphUniversalCarousel=o;class h{constructor(t){this.container=t,this.loopContainer=t.querySelector(".hph-loop-container"),this.viewButtons=t.querySelectorAll("[data-view]"),this.sortSelect=t.querySelector("[data-sort-posts]"),this.init()}init(){this.bindEvents()}bindEvents(){this.viewButtons.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),this.switchView(t.dataset.view)})}),this.sortSelect&&this.sortSelect.addEventListener("change",t=>{this.handleSort(t.target.value)})}switchView(t){this.viewButtons.forEach(i=>{i.classList.remove("hph-view-btn-active")});const e=this.container.querySelector('[data-view="'.concat(t,'"]'));e&&e.classList.add("hph-view-btn-active"),this.loopContainer&&(this.loopContainer.classList.remove("hph-loop-container--grid","hph-loop-container--list"),this.loopContainer.classList.add("hph-loop-container--".concat(t)),this.loopContainer.dataset.layout=t,this.updateCardLayouts(t)),this.container.dispatchEvent(new CustomEvent("viewChanged",{detail:{view:t}}))}updateCardLayouts(t){this.loopContainer.querySelectorAll(".hph-universal-card").forEach(i=>{i.classList.remove("hph-card-vertical","hph-card-horizontal"),t==="list"?i.classList.add("hph-card-horizontal"):i.classList.add("hph-card-vertical")})}handleSort(t){this.container.dispatchEvent(new CustomEvent("sortChanged",{detail:{sortBy:t}}))}destroy(){this.container.classList.remove("is-initialized")}refresh(){this.init()}getCurrentView(){const t=this.container.querySelector(".hph-view-btn-active");return t?t.dataset.view:"grid"}}document.addEventListener("DOMContentLoaded",function(){const a=document.querySelectorAll(".hph-universal-loop"),t=[];a.forEach((e,i)=>{try{const s=new h(e);t.push(s),e.hphLoop=s,e.classList.add("is-initialized")}catch(s){}}),window.HphLoops=t});typeof n!="undefined"&&n.exports?n.exports=h:window.HphUniversalLoop=h});export default d();
