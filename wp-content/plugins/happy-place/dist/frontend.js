!function(){"use strict";class t{constructor(){this.init()}init(){this.setupEventListeners(),this.initializeComponents()}setupEventListeners(){document.addEventListener("DOMContentLoaded",()=>{this.initListingCards(),this.initContactForms(),this.initFilterSidebar()})}initializeComponents(){window.HappyPlace}initListingCards(){document.querySelectorAll(".listing-card").forEach(t=>{t.addEventListener("mouseenter",()=>{t.classList.add("is-hovered")}),t.addEventListener("mouseleave",()=>{t.classList.remove("is-hovered")}),t.addEventListener("click",e=>{e.target.closest(".listing-card__actions")||this.trackEvent("listing_card_click",{listing_id:t.dataset.listingId})})})}initContactForms(){document.querySelectorAll(".hp-contact-form").forEach(t=>{t.addEventListener("submit",e=>{e.preventDefault(),this.submitContactForm(t)})})}initFilterSidebar(){const t=document.querySelector(".listing-filters");if(!t)return;t.querySelectorAll("input, select").forEach(t=>{t.addEventListener("change",()=>{this.applyFilters()})})}async submitContactForm(t){const e=t.querySelector('[type="submit"]'),n=e.textContent;try{e.textContent="Sending...",e.disabled=!0;const n=new FormData(t);n.append("action","hp_submit_contact"),n.append("nonce",window.hp_frontend?.nonce||"");const i=await fetch(window.hp_frontend?.ajax_url||"/wp-admin/admin-ajax.php",{method:"POST",body:n}),s=await i.json();if(!s.success)throw new Error(s.data?.message||"Failed to send message");this.showNotification("Message sent successfully!","success"),t.reset()}catch(t){this.showNotification("Error sending message. Please try again.","error")}finally{e.textContent=n,e.disabled=!1}}applyFilters(){}trackEvent(t,e={}){window.hp_frontend?.ajax_url&&fetch(window.hp_frontend.ajax_url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"hp_track_event",nonce:window.hp_frontend.nonce,event_type:t,data:JSON.stringify(e)})}).catch(t=>{})}showNotification(t,e="info"){const n=document.createElement("div");n.className=`hp-notification hp-notification--${e}`,n.textContent=t,document.body.appendChild(n),setTimeout(()=>{n.remove()},5e3)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{new t}):new t}();